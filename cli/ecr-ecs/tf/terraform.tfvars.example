# =============================================================================
# ECR → ECS Fargate Architecture
# =============================================================================
# このファイルをコピーして terraform.tfvars を作成してください:
#   cp terraform.tfvars.example terraform.tfvars

# =============================================================================
# General Settings
# =============================================================================

# AWSリージョン
aws_region = "ap-northeast-1"

# プロジェクト名（リソース名のプレフィックスに使用）
project_name = "ecr-ecs"

# 環境名
environment = "dev"

# スタック名（必須）
stack_name = "my-app"

# =============================================================================
# VPC Settings
# =============================================================================

# VPC CIDR
vpc_cidr = "10.0.0.0/16"

# パブリックサブネットCIDR（ALB配置用、2つのAZ）
public_subnet_cidrs = ["10.0.1.0/24", "10.0.2.0/24"]

# プライベートサブネットCIDR（ECS Tasks配置用、2つのAZ）
private_subnet_cidrs = ["10.0.11.0/24", "10.0.12.0/24"]

# =============================================================================
# ECR Settings
# =============================================================================

# イメージタグの可変性（MUTABLE or IMMUTABLE）
ecr_image_tag_mutability = "MUTABLE"

# プッシュ時にイメージスキャンを有効にするか
ecr_scan_on_push = true

# リポジトリ削除時にイメージがあっても強制削除するか
ecr_force_delete = false

# =============================================================================
# ECS Settings
# =============================================================================

# コンテナポート
container_port = 80

# Fargate CPU（256, 512, 1024, 2048, 4096）
fargate_cpu = 256

# Fargateメモリ（MB）
# CPU=256: 512, 1024, 2048
# CPU=512: 1024-4096
# CPU=1024: 2048-8192
# CPU=2048: 4096-16384
# CPU=4096: 8192-30720
fargate_memory = 512

# タスクの希望数
desired_count = 2

# コンテナイメージ（nullの場合はECRリポジトリのlatestを使用）
# container_image = "nginx:latest"
container_image = null

# ECSサービスを作成するか（イメージがプッシュされるまでfalse推奨）
create_ecs_service = false

# Container Insightsを有効にするか
enable_container_insights = true

# =============================================================================
# ALB Settings
# =============================================================================

# ALBを内部向けにするか
alb_internal = false

# ヘルスチェックパス
health_check_path = "/"

# ヘルスチェック間隔（秒）
health_check_interval = 30

# ヘルスチェックタイムアウト（秒）
health_check_timeout = 5

# 正常判定の閾値
healthy_threshold = 2

# 異常判定の閾値
unhealthy_threshold = 3

# ターゲット登録解除の待機時間（秒）
deregistration_delay = 30

# =============================================================================
# Logging Settings
# =============================================================================

# CloudWatch Logsの保持期間（日）
log_retention_days = 30

# =============================================================================
# Tags
# =============================================================================

tags = {
  Owner = "your-name"
}
